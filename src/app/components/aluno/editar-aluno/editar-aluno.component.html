<div class="edit">
<h2>Editar Perfil</h2>
  <form [formGroup]="formAluno">
    <!-- Nome -->
    <mat-form-field class="full-input-field">
      <mat-label>Nome</mat-label>
      <input matInput type="text" formControlName="nome" placeholder="Nome Completo">
      <mat-error *ngIf="formAluno.get('nome')?.hasError('required') && formAluno.get('nome')?.touched">
        Digite o nome completo!
      </mat-error>
      <mat-error *ngIf="formAluno.get('nome')?.hasError('minlength') && formAluno.get('nome')?.touched">
        O nome deve conter ao menos 2 caracteres!
      </mat-error>
    </mat-form-field>
    
    <!-- Email -->
    <mat-form-field class="full-input-field">
      <mat-label>Email UFPR</mat-label>
      <input matInput type="email" formControlName="email" placeholder="ex. nome.aluno@ufpr.br">
      <mat-error *ngIf="formAluno.get('email')?.hasError('required') && formAluno.get('email')?.touched">
        Digite o email do aluno.
      </mat-error>
      <mat-error *ngIf="formAluno.get('email')?.hasError('minlength') && formAluno.get('email')?.touched">
        O email deve conter pelo menos 2 caracteres.
      </mat-error>
      <mat-error *ngIf="formAluno.get('email')?.hasError('pattern') && formAluno.get('email')?.touched">
        O email deve pertencer ao domínio "@ufpr.br".
      </mat-error>
    </mat-form-field>

    <!-- Curso -->
    <mat-form-field class="full-input-field">
      <mat-label>Curso</mat-label>
      <input type="text" matInput [formControl]="myControl" [matAutocomplete]="auto" required>
      <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
        <mat-option *ngFor="let option of filteredOptions | async" [value]="option">
          {{ option.nome }}
        </mat-option>
      </mat-autocomplete>
      <mat-error *ngIf="myControl.hasError('required')">
        Seleção do curso é obrigatória!
      </mat-error>
    </mat-form-field>

    <!-- GRR -->
    <mat-form-field class="half-input-field">
      <mat-label>GRR</mat-label>
      <input matInput type="text" id="grr" formControlName="grr" required numerico mask="00000000" placeholder="ex. 20100000">
      <mat-error *ngIf="!grrValido">
        O GRR deve conter apenas números.
      </mat-error>
    </mat-form-field>

    <!-- Celular -->
    <mat-form-field class="half-input-field" id="right-input-field">
      <mat-label>Celular</mat-label>
      <input matInput type="text" formControlName="telefone" required placeholder="ex. (41)99999-9999" mask="(00)00000-0000">
      <mat-error *ngIf="formAluno.get('telefone')?.hasError('required') && formAluno.get('telefone')?.touched">
        Digite o número do celular.
      </mat-error>
      <mat-error *ngIf="formAluno.get('telefone')?.hasError('minlength') && formAluno.get('telefone')?.touched">
        O número do celular deve conter 11 dígitos.
      </mat-error>
    </mat-form-field>

    <!-- Senha -->
    <mat-form-field class="full-input-field">
      <mat-label>Senha</mat-label>
      <input matInput [type]="hide ? 'password' : 'text'" formControlName="senha" required minlength="8">
      <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
      <!-- Validação customizada de senha -->
      <mat-error *ngIf="formAluno.get('senha')?.hasError('customError')">
        • Deve conter pelo menos 8 caracteres. <br>
        • Deve conter pelo menos um caractere especial (!@#$%^&*()]).<br>
        • Deve conter pelo menos um caractere numérico. <br>
        • Deve conter pelo menos uma letra maiúscula. <br>
        • Deve conter pelo menos uma letra minúscula. <br>
      </mat-error>
    </mat-form-field>

    <!-- Confirmação de Senha -->
    <mat-form-field class="full-input-field">
      <mat-label>Confirme sua senha</mat-label>
      <input matInput [type]="hide ? 'password' : 'text'" formControlName="confirmarSenha" required minlength="8">
      <mat-icon matSuffix (click)="hide = !hide">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
      <!-- Validação de comparação de senha -->
      <mat-error *ngIf="formAluno.hasError('senhasNaoIguais')">
        As senhas não correspondem.
      </mat-error>
    </mat-form-field>
  </form>

  <button mat-button [mat-dialog-close]="true" cdkFocusInitial (click)="autocadastrar()" [disabled]="!formAluno.valid">Salvar</button>
</div>